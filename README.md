# Two-Timescale Traction Simulation

## main

`main.py` is the primary simulation script. Since the simulation takes a long time, data generated during the simulation is saved in real-time into the `log` directory.

---

## Data

The `Data` folder stores data required for simulation experiments:

1. **DFs**: Stores train operation topology and status data.  
   - 18-hour train operation data is automatically generated using train schedules, traction substation distributions, dwelling times, etc.  
   - Data generation is encapsulated in `Funcs/TractionDataCreate` and can be run via `Funcs/TractionDataCreate/main.py`, saving results as `.csv` files.  
   - In the simulation, data is read using pandas via the `MyProcess.load_DFs()` method.

2. **load_avg**: Minute-level load information for each traction substation from day-ahead calculations. Generated by running `loadDistributeMain.py`.

3. **Price**: Time-of-use electricity price information, based on industrial electricity data in Beijing.

4. **PVs**: Photovoltaic (PV) generation data.

---

## Funcs

### controlParam

Stores simulation parameters.

### PF

Defines a series of functions for power flow equations.

### OPF

`Funcs/OPF/efficiencyOPF` defines three types of functions:

1. `offlineEfficiencyOPF.py`: Offline dispatch solver for baseline electricity cost comparison.  
2. `dayAheadEfficiencyOPF.py`: Day-ahead dispatch solver, outputs SOC curves for online dispatch tracking.  
3. `realTimeEfficiencyOPF.py`: Online decision-making solver.

### TractionDataCreate

Defines methods for generating locomotive operation status data.

### admittanceMatrix_split & admittanceMatrix

Used to calculate the admittance matrix for power flow equations.
